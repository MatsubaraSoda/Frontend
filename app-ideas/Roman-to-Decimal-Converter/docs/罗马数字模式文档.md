# 罗马数字模式：一种新的理解方式

为了更好地理解罗马数字，首先我们需要了解其基本符号以及对应的数值。

| **罗马数字符号** | **阿拉伯数字** | **说明** | 
| :---: | :---: | :---: | 
| I | 1 | 基本符号 | 
| V | 5 | 基本符号 | 
| X | 10 | 基本符号 | 
| L | 50 | 基本符号 | 
| C | 100 | 基本符号 | 
| D | 500 | 基本符号 | 
| M | 1000 | 基本符号 | 
| V̅ | 5,000 | V上加横线，表示乘以1000 | 
| X̅ | 10,000 | X上加横线 | 
| L̅ | 50,000 | L上加横线 | 
| C̅ | 100,000 | C上加横线 | 
| D̅ | 500,000 | D上加横线 | 
| M̅ | 1,000,000 | M上加横线 | 
| V̅̅ | 5,000,000 | V上加双横线 | 
| X̅̅ | 10,000,000 | X上加双横线 | 
| L̅̅ | 50,000,000 | L上加双横线 | 
| C̅̅ | 100,000,000 | C上加双横线 | 
| D̅̅ | 500,000,000 | D上加双横线 | 
| M̅̅ | 1,000,000,000 | M上加双横线 | 

传统的罗马数字规则可能看起来有些复杂，但通过一种简单的模式，我们可以轻松理解其构造。这种模式将每个位（个位、十位、百位等）的符号分为三类：

* **a**: 最小的符号，用于表示 1, 2, 3 以及减法中的 9。

* **b**: 中间的符号，用于表示 5, 6, 7, 8。

* **c**: 下一组的最小符号，用于减法中的 4 和 9。

例如，对于个位，我们有：

* a = I

* b = V

* c = X

通过这种分组，我们可以得到一个统一的数字模式，它适用于罗马数字的每一个位：

| **数字** | **模式** | **符号组合** | **举例（个位）** | 
| :---: | :---: | :---: | :---: | 
| **0** | 无 | 无 | - | 
| **1** | a | 单个 a | I | 
| **2** | aa | 两个 a | II | 
| **3** | aaa | 三个 a | III | 
| **4** | ab | a 放在 b 前 | IV | 
| **5** | b | 单个 b | V | 
| **6** | ba | b 放在 a 前 | VI | 
| **7** | baa | b 放在两个 a 前 | VII | 
| **8** | baaa | b 放在三个 a 前 | VIII | 
| **9** | ac | a 放在 c 前 | IX | 

当某个位上的数字为 0 时，我们遵循罗马数字的惯例：不使用任何符号，因为罗马数字没有零或占位符的概念。

### 罗马数字的扩展

对于更大的数字，罗马人通过在符号上方加一横线来表示该符号乘以 1000。这个模式同样适用，只要我们按照您的思路不断创建新的符号组：

| **组别** | **a** | **b** | **c** | 
| :---: | :---: | :---: | :---: | 
| 个位 | I | V | X | 
| 十位 | X | L | C | 
| 百位 | C | D | M | 
| 千位 | M | V̅ | X̅ | 
| 万位 | X̅ | L̅ | C̅ | 
| 十万位 | C̅ | D̅ | M̅ | 
| 百万位 | M̅ | V̅̅ | X̅̅ | 
| 千万位 | X̅̅ | L̅̅ | C̅̅ | 
| 亿位 | C̅̅ | D̅̅ | M̅̅ | 

通过这种模式，我们可以系统地理解和构造任何罗马数字。

## 正则表达式验证规则

基于上述模式，我们可以设计一个严格的正则表达式来验证罗马数字的合法性。罗马数字由9个组别组成，从高到低分别是：

### 组别模式定义

每个组别有10种可能的组合：
- **0**: 无符号（空字符串）
- **1**: a（如 I, X, C 等）
- **2**: aa（如 II, XX, CC 等）
- **3**: aaa（如 III, XXX, CCC 等）
- **4**: ab（如 IV, XL, CD 等）
- **5**: b（如 V, L, D 等）
- **6**: ba（如 VI, LX, DC 等）
- **7**: baa（如 VII, LXX, DCC 等）
- **8**: baaa（如 VIII, LXXX, DCCC 等）
- **9**: ac（如 IX, XC, CM 等）

### 完整正则表达式

```
^(C̅̅|D̅̅|M̅̅){0,1}((C̅̅M̅̅)|(D̅̅C̅̅{0,3})|(C̅̅D̅̅)|(C̅̅{0,3}))(X̅̅|L̅̅|C̅̅){0,1}((X̅̅C̅̅)|(L̅̅X̅̅{0,3})|(X̅̅L̅̅)|(X̅̅{0,3}))(M̅|V̅|X̅){0,1}((M̅X̅)|(V̅M̅{0,3})|(M̅V̅)|(M̅{0,3}))(C̅|D̅|M̅){0,1}((C̅M̅)|(D̅C̅{0,3})|(C̅D̅)|(C̅{0,3}))(X̅|L̅|C̅){0,1}((X̅C̅)|(L̅X̅{0,3})|(X̅L̅)|(X̅{0,3}))(M|V|X){0,1}((MX)|(VM{0,3})|(MV)|(M{0,3}))(C|D|M){0,1}((CM)|(DC{0,3})|(CD)|(C{0,3}))(X|L|C){0,1}((XC)|(LX{0,3})|(XL)|(X{0,3}))(I|V|X){0,1}((IX)|(VI{0,3})|(IV)|(I{0,3}))$
```

### 正则表达式说明

正则表达式按从高到低的组别顺序排列：
1. **亿位组** (C̅̅, D̅̅, M̅̅)
2. **千万位组** (X̅̅, L̅̅, C̅̅)  
3. **百万位组** (M̅, V̅, X̅)
4. **十万位组** (C̅, D̅, M̅)
5. **万位组** (X̅, L̅, C̅)
6. **千位组** (M, V, X)
7. **百位组** (C, D, M)
8. **十位组** (X, L, C)
9. **个位组** (I, V, X)

每个组别的模式：`(a|b|c){0,1}((ac)|(ba{0,3})|(ab)|(a{0,3}))`

- `{0,1}` 表示该组别可以为空
- `(ac)|(ba{0,3})|(ab)|(a{0,3})` 对应数字0-9的10种情况
