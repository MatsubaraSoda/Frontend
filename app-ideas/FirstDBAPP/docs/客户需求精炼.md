# 客户需求精炼文档

## 项目概述
创建一个基于 IndexedDB 的客户数据库管理应用，用于演示浏览器内置数据库的使用。

## 核心功能需求

### 1. 用户界面组件
- [ ] **控制面板**：包含三个按钮
  - 加载数据库 (Load DB)
  - 查询数据库 (Query DB) 
  - 清除数据库 (Clear DB)
- [ ] **通知面板**：显示操作状态消息
- [ ] **日志面板**：可滚动，显示操作执行详情
- [ ] **查询结果区域**：可滚动，显示检索到的客户数据

### 2. 数据库操作功能
- [ ] **数据加载**：点击"加载数据库"按钮，用初始数据填充数据库
- [ ] **数据查询**：点击"查询数据库"按钮，列出所有客户
- [ ] **数据清除**：点击"清除数据库"按钮，删除所有客户数据

### 3. 状态管理
- [ ] **操作反馈**：每个操作开始和结束时在通知面板显示消息
- [ ] **空数据提示**：查询结果为空时显示相应提示信息
- [ ] **日志记录**：所有操作详情记录在日志面板中

## 技术实现要求

### 1. 必需实现
- [ ] 将"加载数据库"按钮连接到 `loadDB` 事件处理器
- [ ] 将"清除数据库"按钮连接到 `clearDB` 事件处理器
- [ ] 实现查询数据库功能：在 Customer 类中添加 `queryAllRows` 方法，并创建 `queryDB` 事件处理器连接到"查询数据库"按钮

### 2. 代码结构
- [ ] 使用提供的 Customer 类作为基础
- [ ] 数据库名称：`customer_db`
- [ ] 对象存储：`customers`
- [ ] 主键：`userid`
- [ ] 索引：`name`（非唯一）、`email`（唯一）

## 奖励功能（可选）

### 1. 按钮状态管理
根据操作状态动态启用/禁用按钮：

| 状态               | 加载数据库 | 查询数据库 | 清除数据库 |
|---------------------|----------|----------|----------|
| 初始应用显示       | 启用     | 启用     | 禁用     |
| 点击加载数据库     | 禁用     | 启用     | 启用     |
| 点击查询数据库     | 禁用     | 启用     | 启用     |
| 点击清除数据库     | 启用     | 启用     | 禁用     |

### 2. 数据字段扩展
- [ ] 添加"最后订单日期"字段
- [ ] 添加"年度总销售额"字段

## 数据模型

### 基础客户数据结构
```js
{
  userid: '444',
  name: 'Bill', 
  email: 'bill@company.com'
}
```

### 扩展客户数据结构（奖励功能）
```js
{
  userid: '444',
  name: 'Bill',
  email: 'bill@company.com',
  lastOrderDate: '2024-01-15',
  yearlySales: 15000
}
```

## 验收标准

### 基本功能验收
- [ ] 所有三个按钮正常工作
- [ ] 数据加载、查询、清除操作成功执行
- [ ] 通知面板正确显示操作状态
- [ ] 日志面板记录所有操作详情
- [ ] 查询结果正确显示

### 用户体验验收
- [ ] 界面布局清晰，易于使用
- [ ] 操作反馈及时明确
- [ ] 错误处理友好
- [ ] 响应速度合理

## 技术约束

### 浏览器兼容性
- 要求支持 IndexedDB 的现代浏览器
- 不支持 IndexedDB 时显示友好提示

### 安全考虑
- 不在客户端存储敏感信息
- 不存储个人身份信息（PII）
- 仅用于演示和学习目的

## 开发优先级

### 第一阶段（必需）
1. 创建基础 HTML 结构
2. 实现三个按钮的事件连接
3. 实现查询数据库功能（添加 `queryAllRows` 方法和 `queryDB` 处理器）

### 第二阶段（奖励）
1. 实现按钮状态管理
2. 扩展客户数据字段
3. 优化用户界面
4. 添加错误处理

## 测试要点

### 功能测试
- [ ] 数据加载功能测试
- [ ] 数据查询功能测试  
- [ ] 数据清除功能测试
- [ ] 错误处理测试

### 界面测试
- [ ] 按钮状态变化测试
- [ ] 通知消息显示测试
- [ ] 日志记录完整性测试
- [ ] 查询结果展示测试

---

*本文档基于 "你的第一个数据库应用" 项目需求整理，用于指导开发实现。*
